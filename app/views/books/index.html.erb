<div class="container mx-auto px-4 py-8">
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4">
    <h1 class="text-3xl font-bold text-gray-800">Library Books</h1>

    <!-- Search Form -->
    <%= form_with url: books_path, method: :get, local: true, class: "w-full md:w-auto" do |form| %>
      <div class="relative flex items-center">
        <%= form.text_field :query,
              value: params[:query],
              placeholder: "Search by title, author or genre",
              class: "block w-full md:w-80 pl-4 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500" %>
        <button type="submit" class="absolute right-2 text-gray-500 hover:text-blue-600">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
    <% end %>

    <% if policy(Book).new? %>
      <%= link_to new_book_path, class: "flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors" do %>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z" clip-rule="evenodd" />
        </svg>
        Add New Book
      <% end %>
    <% end %>
  </div>

  <% if params[:query].present? %>
    <div class="mb-6 flex items-center justify-between">
      <p class="text-gray-600">
        <%= pluralize(@books.size, 'result') %> for "<%= params[:query] %>"
      </p>
      <%= link_to "Clear search", books_path, class: "text-blue-600 hover:underline" %>
    </div>
  <% end %>

  <div class="bg-white shadow-lg rounded-lg overflow-hidden">
    <%= render 'books_table', books: @books %>
  </div>
</div>